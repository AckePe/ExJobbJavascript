<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript App</title>
    <link rel="stylesheet" href="/style.e308ff8e.css">
  <script src="/style.e308ff8e.js"></script></head>
  <body>
    <div id="root" class="container">
      <header class="header">
        <h1>JavaScript</h1>
      </header>
      <div>
        <img src="/js-logo.12c4411f.png" alt="Logo">
      </div>
      <div>
        <button class="btn" id="toggleButton">Search</button>
      </div>
      <nav class="navbar" id="searchContent" style="display: none">
        <!-- Add the "hidden" class here -->
        <input type="text" placeholder="Search..." id="searchInput">
        <!-- Add the "hidden" class to input -->
        <button class="navbar-btn hidden" onclick="search()">
          Search
        </button>
        <!-- Add the "hidden" class to button -->
        <button class="navbar-btn hidden" onclick="handleSearchButtonClick()">
          Measure
        </button>
        <!-- Add the "hidden" class to button -->
      </nav>
      <ul class="samples" id="searchResultsContainer"></ul>
      <footer class="footer">
        <p>
          <a href="https://creativecommons.org/licenses/by/4.0/" style="color: #f0db4f;">
            Attribution 4.0 International (CC BY 4.0)
          </a>
          </p><p>
            Dataset created by 
            <a href="https://www.kaggle.com/datasets/whenamancodes/online-retail-data-ii" style="color: #f0db4f;">
              Aman Chauhan
            </a>
          </p>
        <p></p>
      </footer>
    </div>

    <!-- Ensure main.js is loaded before any usage -->
    <script>document.addEventListener("DOMContentLoaded", function () {
  var toggleButton = document.getElementById("toggleButton");
  toggleButton.addEventListener("click", toggleContent);

  // Add event listener to the search button
  var searchButton = document.querySelector("#searchContent button");
  searchButton.addEventListener("click", function () {
    // Display search content if hidden
    var searchContent = document.getElementById("searchContent");
    if (searchContent.style.display === "none") {
      searchContent.style.display = "flex";
      toggleButton.textContent = "Home"; // Change button text
    }

    // Run the search function
    search();
  });
  fetch('http://localhost:3000/dataSet.json').then(function (response) {
    console.log('Fetch response:', response);
    return response.json(); // Parse response body as JSON
  }).then(function (data) {
    console.log('Parsed JSON data:', data); // Log parsed JSON data

    // Store the data globally
    window.data = data;
  }).catch(function (error) {
    console.error('Error fetching data:', error);
  });
});
function toggleContent() {
  var searchContent = document.getElementById("searchContent");
  var toggleButton = document.getElementById("toggleButton");
  if (searchContent.style.display === "none") {
    searchContent.style.display = "flex";
    toggleButton.textContent = "Home"; // Change button text
  } else {
    searchContent.style.display = "none"; // Corrected assignment
    toggleButton.textContent = "Search"; // Change button text
  }
}
function search() {
  // Get search query from input field
  var query = document.getElementById("searchInput").value.toLowerCase().trim();

  // Get reference to search results container
  var searchResultsContainer = document.getElementById("searchResultsContainer");
  searchResultsContainer.innerHTML = ""; // Clear previous search results

  // Filter data based on search query
  var filteredData = window.data.filter(function (item) {
    // Check if any field matches the search query
    for (var key in item) {
      if (item.hasOwnProperty(key) && typeof item[key] === "string" && item[key].toLowerCase().includes(query)) {
        return true;
      }
    }
    return false;
  });

  // Render search results
  filteredData.forEach(function (dataset) {
    var card = document.createElement("div");
    card.className = "card";

    // Construct card content
    var headerHTML = "<div class='card-header'><h3>Stock code: " + dataset.stockcode + "</h3></div>";
    var bodyHTML = "<div class='card-body'>" + "<p><strong>Description: </strong>" + dataset.description + "</p>" + "<p><strong>Quantity: </strong>" + dataset.quantity + "</p>" + "<p><strong>Price: </strong>" + dataset.price + "</p>" + "<p><strong>Invoice date: </strong>" + dataset.invoiceDate + "</p>" + "<p><strong>Country: </strong>" + dataset.country + "</p>" + "</div>";
    card.innerHTML = headerHTML + bodyHTML;
    searchResultsContainer.appendChild(card);
  });
}</script>
  </body>
</html>
